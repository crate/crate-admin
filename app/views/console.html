<div class="page-container">
    <div class="cr-page-header">
      <h1>{{ 'NAVIGATION.CONSOLE' | translate }}</h1>
    </div>

    <div console>
        <div>
          <div class="cr-console-header">
            <div class="cr-console-header__tip">{{ 'CONSOLE.TIP' | translate }}</div>
            
            <div class="cr-console-header__options__item--btn cr-button hide-gt-xs" ng-click="toggleOptions()">
                <i class="fa fa-cog"></i>
            </div>

            <div class="cr-console-header__options" ng-class="showOptions ? 'show-console-options' : 'hide-console-options'">
              <div class="cr-console-header__options__item">
                  <input  id="use-local-storage" type="checkbox" ng-model="useLocalStorage" ng-change="storeInLocalStorageChanged()" /> 
                  <label for="use-local-storage">{{ 'CONSOLE.STORE_CONSOLE' | translate }}</label>
              </div>
              <div class="cr-console-header__options__item">
                <input id="show-error-trace" type="checkbox" ng-model="showErrorTrace" ng-change="showErrorTraceChanged()">
                <label for="show-error-trace" >{{ 'CONSOLE.SHOW_ERROR_TRACE' | translate }} </label>
              </div>

              <div class="cr-console-header__options__item--btn cr-button" ng-click="clearLocalStorage()">
                <i class="fa fa-trash-o"></i>
                {{ 'CONSOLE.CLEAR_HISTORY' | translate }} 
              </div>
            </div>
          </div>

          <div>
            <cli mime-type="text/x-plsql" theme="monokai"></cli>
          </div>

          <div class="cr-console-header">
            <div class="cr-console-header__tip {{ status | queryStatusClass }}" >{{ status }}</div>

            <div class="cr-console-header__options">
              <div class="cr-console-header__options__item--hint">{{ 'CONSOLE.HINT' | translate }}</div>
              <div id="execute-btn" class="cr-console-header__options__item--btn cr-button cr-button--primary" ng-click="execute()" type="submit" class="ladda-button" data-style="expand-left" translate>{{ 'CONSOLE.EXCUTE_QUERY' }}</div>
            </div>
          </div>
      </div>

      <div ng-hide="error.hide" class="cr-error-header query-status--error">
        <p>{{ 'CONSOLE.ERROR' | translate }}</p>
        <p>{{ error.message }}</p>
      </div>

      <div ng-hide="error.hide || !showErrorTrace" class="cr-error-header--error-trace">
        <h4> {{ 'CONSOLE.ERROR_TRACE' | translate }} </h4>
      </div>

      <div ng-hide="error.hide || !showErrorTrace">
        <pre id="error-trace"><code>{{ error.error_trace }}</code></pre>
      </div>
    </div>

    <div ng-show="renderTable" class="query-result-container">
      
      <h2  class="query-result-container__header">{{ 'CONSOLE.RESULT_FROM_QUERY' | translate }}</h2>
      <div class="table-responsive">
        <table class="table">
          <thead>
            <tr>
              <th class="cr-table-cell" ng-repeat="header in resultHeaders track by $index" class="header">{{ header }}</th>
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat="row in rows">
              <td class="cr-table-cell" ng-repeat="column in row track by $index">
                <pre class="query-result" ng-if="column != null">{{ column }}</pre>
                <pre class="query-result" ng-if="column == null">NULL</pre>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

</div>
